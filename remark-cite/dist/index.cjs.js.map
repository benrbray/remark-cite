{"version":3,"file":"index.cjs.js","sources":["../src/index.ts"],"sourcesContent":["import { citeSyntax, CiteSyntaxOptions } from \"@benrbray/micromark-extension-cite\";\nimport { citeFromMarkdown, citeToMarkdown, CiteToMarkdownOptions } from \"@benrbray/mdast-util-cite\";\n\n////////////////////////////////////////////////////////////\n\nvar warningIssued: boolean = false;\n\nfunction remarkV13Warning(context: any): boolean {\n\tif (\n\t\t!warningIssued &&\n\t\t((context.Parser &&\n\t\t  context.Parser.prototype &&\n\t\t  context.Parser.prototype.blockTokenizers) ||\n\t\t  (context.Compiler &&\n\t\t   context.Compiler.prototype &&\n\t\t   context.Compiler.prototype.visitors))\n\t) {\n\t\twarningIssued = true\n\t\tconsole.warn(\n\t\t\t'[remark-cite] Warning: please upgrade to remark 13 to use this plugin'\n\t\t)\n\t}\n\n\treturn warningIssued;\n}\n\nexport interface CitePluginOptions {\n\tsyntax     : Partial<CiteSyntaxOptions>,\n\ttoMarkdown : Partial<CiteToMarkdownOptions>\n\t// add extra options here, in addition to those for the syntax extension\n}\n\nexport function citePlugin(this: any, options: Partial<CitePluginOptions>) {\n\tvar data = this.data()\n\n\t// warn for earlier versions\n\tremarkV13Warning(this);\n\n\tadd('micromarkExtensions', citeSyntax(options.syntax || {}));\n\tadd('fromMarkdownExtensions', citeFromMarkdown);\n\tadd('toMarkdownExtensions', citeToMarkdown(options.toMarkdown || {}));\n\n\tfunction add(field: string, value: any) {\n\t\tif (data[field]) data[field].push(value)\n\t\telse data[field] = [value]\n\t}\n}"],"names":["citeSyntax","citeFromMarkdown","citeToMarkdown"],"mappings":";;;;;;;AAKA,IAAI,aAAa,GAAY,KAA7B;;AAEA,SAAS,gBAAT,CAA0B,OAA1B,EAAsC;AACrC,MACC,CAAC,aAAD,KACE,OAAO,CAAC,MAAR,IACA,OAAO,CAAC,MAAR,CAAe,SADf,IAEA,OAAO,CAAC,MAAR,CAAe,SAAf,CAAyB,eAF1B,IAGE,OAAO,CAAC,QAAR,IACA,OAAO,CAAC,QAAR,CAAiB,SADjB,IAEA,OAAO,CAAC,QAAR,CAAiB,SAAjB,CAA2B,QAN9B,CADD,EAQE;AACD,IAAA,aAAa,GAAG,IAAhB;AACA,IAAA,OAAO,CAAC,IAAR,CACC,uEADD;AAGA;;AAED,SAAO,aAAP;AACA;;AAQK,SAAU,UAAV,CAAgC,OAAhC,EAAmE;AACxE,MAAI,IAAI,GAAG,KAAK,IAAL,EAAX,CADwE;;AAIxE,EAAA,gBAAgB,CAAC,IAAD,CAAhB;AAEA,EAAA,GAAG,CAAC,qBAAD,EAAwBA,iCAAU,CAAC,OAAO,CAAC,MAAR,IAAkB,EAAnB,CAAlC,CAAH;AACA,EAAA,GAAG,CAAC,wBAAD,EAA2BC,8BAA3B,CAAH;AACA,EAAA,GAAG,CAAC,sBAAD,EAAyBC,4BAAc,CAAC,OAAO,CAAC,UAAR,IAAsB,EAAvB,CAAvC,CAAH;;AAEA,WAAS,GAAT,CAAa,KAAb,EAA4B,KAA5B,EAAsC;AACrC,QAAI,IAAI,CAAC,KAAD,CAAR,EAAiB,IAAI,CAAC,KAAD,CAAJ,CAAY,IAAZ,CAAiB,KAAjB,EAAjB,KACK,IAAI,CAAC,KAAD,CAAJ,GAAc,CAAC,KAAD,CAAd;AACL;AACD;;;;"}